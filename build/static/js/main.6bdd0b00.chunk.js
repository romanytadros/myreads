(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{13:function(e,n,t){},38:function(e,n,t){},53:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),i=t(17),a=t.n(i),o=(t(38),t(13),t(4)),s="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var u={Accept:"application/json",Authorization:d},l=function(){return fetch("".concat(s,"/books"),{headers:u}).then((function(e){return e.json()})).then((function(e){return e}))},b=function(e,n){return fetch("".concat(s,"/books/").concat(e),{method:"PUT",headers:Object(o.a)(Object(o.a)({},u),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:n})}).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},j=t(5),h=function(e){return{payload:e,type:"BOOK_LIST"}},f=function(e){return{query:e,type:"SEARCH_BOOK"}},O=function(e){return{type:"IS_BUSY",isbusy:e}},m=function(e){return{type:"IS_BUSY2",isbusy2:e}},k=function(e){return{type:"CURRENTLY_READING",currentlyReading:e}},g=function(e){return{type:"WANT_TO_READ",wantToRead:e}},y=function(e){return{type:"READ",read:e}},T=t(1);var x=function(e,n,t){var c=Object(r.useRef)(null),i=Object(j.c)((function(e){return e.currentlyReading})),a=Object(j.c)((function(e){return e.wantToRead})),o=Object(j.c)((function(e){return e.read})),s=Object(j.c)((function(e){return e.booklist})),d=Object(j.b)();function u(n,t){switch(document.getElementsByName(e.bkid)[0].value=n,document.getElementsByName(e.bkid)[0][t].innerHTML="\u221a "+n,n){case"currentlyReading":document.getElementsByName(e.bkid)[0][2].innerHTML="wantToRead",document.getElementsByName(e.bkid)[0][3].innerHTML="read",document.getElementsByName(e.bkid)[0][4].innerHTML="none";break;case"wantToRead":document.getElementsByName(e.bkid)[0][1].innerHTML="currentlyReading",document.getElementsByName(e.bkid)[0][3].innerHTML="read",document.getElementsByName(e.bkid)[0][4].innerHTML="none";break;case"read":document.getElementsByName(e.bkid)[0][1].innerHTML="currentlyReading",document.getElementsByName(e.bkid)[0][2].innerHTML="wantToRead",document.getElementsByName(e.bkid)[0][4].innerHTML="none";break;case"none":document.getElementsByName(e.bkid)[0][1].innerHTML="currentlyReading",document.getElementsByName(e.bkid)[0][2].innerHTML="wantToRead",document.getElementsByName(e.bkid)[0][3].innerHTML="read"}}return Object(r.useEffect)((function(){e.ifsearch?setTimeout((function(){var n=s.filter((function(n){return n.id===e.bkid}));n.length>0?("currentlyReading"===n[0].shelf&&(c.current[1].selected=!0,c.current[1].innerHTML="\u221a currentlyReading",c.current[4].innerHTML="none",c.current[2].innerHTML="wantToRead",c.current[3].innerHTML="read"),"wantToRead"===n[0].shelf&&(c.current[2].selected=!0,c.current[2].innerHTML="\u221a wantToRead",c.current[4].innerHTML="none",c.current[1].innerHTML="currentlyReading",c.current[3].innerHTML="read"),"read"===n[0].shelf&&(c.current[3].selected=!0,c.current[3].innerHTML="\u221a read",c.current[4].innerHTML="none",c.current[1].innerHTML="currentlyReading",c.current[2].innerHTML="wantToRead")):c&&(c.current[4].selected=!0,c.current[4].innerHTML="\u221a none",c.current[1].innerHTML="currentlyReading",c.current[2].innerHTML="wantToRead",c.current[3].innerHTML="read")}),10):("currentlyReading"===c.current.value&&(c.current[1].innerHTML="\u221a currentlyReading"),"wantToRead"===c.current.value&&(c.current[2].innerHTML="\u221a wantToRead"),"read"===c.current.value&&(c.current[3].innerHTML="\u221a read"))}),[s,e]),Object(T.jsx)("div",{className:"book-shelf-changer",children:Object(T.jsxs)("select",{value:e.shelfo,name:e.bkid,ref:c,onChange:function(n){"none"===c.current.value&&(d(g(a.filter((function(n){return n.id!==e.bkid})))),d(y(o.filter((function(n){return n.id!==e.bkid})))),d(k(i.filter((function(n){return n.id!==e.bkid})))),b(e.bkid,"none"),e.ifsearch&&setTimeout((function(){u("none",4)}),300)),"currentlyReading"===c.current.value&&(setTimeout((function(){u("currentlyReading",1)}),300),0===i.filter((function(n){return n.id===e.bkid})).length&&(d(g(a.filter((function(n){return n.id!==e.bkid})))),d(y(o.filter((function(n){return n.id!==e.bkid})))),d(k(i.concat(s.filter((function(n){return n.id===e.bkid}))))),b(e.bkid,"currentlyReading"))),"wantToRead"===c.current.value&&(setTimeout((function(){u("wantToRead",2)}),300),0===a.filter((function(n){return n.id===e.bkid})).length&&(d(k(i.filter((function(n){return n.id!==e.bkid})))),d(y(o.filter((function(n){return n.id!==e.bkid})))),d(g(a.concat(s.filter((function(n){return n.id===e.bkid}))))),b(e.bkid,"wantToRead"))),"read"===c.current.value&&(setTimeout((function(){u("read",3)}),300),0===o.filter((function(n){return n.id===e.bkid})).length&&(d(k(i.filter((function(n){return n.id!==e.bkid})))),d(g(a.filter((function(n){return n.id!==e.bkid})))),d(y(o.concat(s.filter((function(n){return n.id===e.bkid}))))),b(e.bkid,"read"))),function(e){setTimeout((function(){"currentlyReading"===e.target.value&&(e.target[1].innerHTML="\u221a currentlyReading"),"wantToRead"===e.target.value&&(e.target[2].innerHTML="\u221a wantToRead"),"read"===e.target.value&&(e.target[3].innerHTML="\u221a read"),"none"===e.target.value&&(e.target[4].innerHTML="\u221a none")}),300)}(n)},children:[Object(T.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(T.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(T.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(T.jsx)("option",{value:"read",children:"Read"}),Object(T.jsx)("option",{value:"none",children:"None"})]})})};var v=function(e){var n=e.booko,t=n.id,r=n.title,c=n.authors,i=n.shelf,a=e.ifsearch;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{className:"book",children:[Object(T.jsxs)("div",{className:"book-top",children:[Object(T.jsx)("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:'url("http://books.google.com/books/content?id='.concat(t,'&printsec=frontcover&img=1&zoom=1&source=gbs_api")')}}),Object(T.jsx)(x,{shelfo:i,bkid:t,ifsearch:a})]}),Object(T.jsx)("div",{className:"book-title",children:r}),Object(T.jsx)("div",{className:"book-authors",children:c.join(" , ")})]})})},R=t(33);var p=function(e){var n=Object(j.b)(),t=Object(j.c)((function(e){return e.isbusy})),c=Object(j.c)((function(e){return e.currentlyReading})),i=Object(j.c)((function(e){return e.wantToRead})),a=Object(j.c)((function(e){return e.read})),o=[],s=[],d=[];return Object(r.useEffect)((function(){n(O(!0)),l().then((function(e){n(h(e.books)),e.books.map((function(e){return"currentlyReading"===e.shelf&&o.push(e),"wantToRead"===e.shelf&&s.push(e),"read"===e.shelf&&d.push(e),e})),n(k(o)),n(g(s)),n(y(d)),n(O(!1))}))}),[]),Object(T.jsx)(T.Fragment,{children:t?Object(T.jsx)("div",{className:"row d-flex justify-content-center",children:Object(T.jsx)("div",{className:"col-3",children:Object(T.jsx)(R.a,{})})}):Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"bookshelf",children:[Object(T.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(T.jsx)("div",{className:"bookshelf-books",children:Object(T.jsx)("ol",{className:"books-grid",children:c&&c.map((function(e,n){return Object(T.jsx)("li",{children:Object(T.jsx)(v,{booko:e},e.id)},e.id)}))})})]}),Object(T.jsxs)("div",{className:"bookshelf",children:[Object(T.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(T.jsx)("div",{className:"bookshelf-books",children:Object(T.jsx)("ol",{className:"books-grid",children:i&&i.map((function(e,n){return Object(T.jsx)("li",{children:Object(T.jsx)(v,{booko:e},e.id)},e.id)}))})})]}),Object(T.jsxs)("div",{className:"bookshelf",children:[Object(T.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(T.jsx)("div",{className:"bookshelf-books",children:Object(T.jsx)("ol",{className:"books-grid",children:a&&a.map((function(e,n){return Object(T.jsx)("li",{children:Object(T.jsx)(v,{booko:e},e.id)},e.id)}))})})]})]})})},N=t(11);var L=function(){return Object(T.jsxs)("div",{className:"list-books",children:[Object(T.jsx)("div",{className:"list-books-title",children:Object(T.jsx)("h1",{children:"MyReads"})}),Object(T.jsx)("div",{className:"list-books-content",children:Object(T.jsx)("div",{children:Object(T.jsx)(p,{})})}),Object(T.jsx)("div",{className:"open-search",children:Object(T.jsx)(N.b,{to:"/search",children:"Add a book"})})]})},M=t(16);var H=function(){var e=Object(r.useState)([]),n=Object(M.a)(e,2),t=n[0],c=n[1],i=Object(r.useRef)(""),a=Object(j.b)(),d=Object(j.c)((function(e){return e.isbusy2}));return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{className:"search-books",children:[Object(T.jsxs)("div",{className:"search-books-bar",children:[Object(T.jsx)(N.b,{to:"/",className:"close-search",children:"Close"}),Object(T.jsx)("div",{className:"search-books-input-wrapper",children:Object(T.jsx)("input",{onChange:function(e){e.preventDefault(),a(m(!0)),setTimeout((function(){var e,n,t=i.current.value.toLowerCase();" "===t||""===t?(c([]),a(f([]))):(e=t.trim(),n=30,fetch("".concat(s,"/search"),{method:"POST",headers:Object(o.a)(Object(o.a)({},u),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:n})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){e&&!e.error?(c(e),a(f(e)),l().then((function(e){a(h(e.books))}))):(c([]),a(f([])))}))}),600),a(m(!0))},type:"text",placeholder:"Search by title, author, or ISBN",ref:i})})]}),Object(T.jsx)("div",{className:"search-books-results",children:Object(T.jsx)("ol",{className:"books-grid",children:d&&Object(T.jsx)(T.Fragment,{children:t.length>0?t.map((function(e,n){return Object(T.jsx)("li",{children:Object(T.jsx)(v,{booko:e,ifsearch:!0},e.id)},e.id)})):Object(T.jsx)("h1",{children:"No search results"})})})})]})})},w=t(3);var E=function(){return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"d-flex align-items-center justify-content-center vh-100",children:Object(T.jsxs)("div",{className:"text-center",children:[Object(T.jsx)("p",{className:"fs-3",children:" 404"}),Object(T.jsx)("p",{className:"fs-1",children:" Page not found"}),Object(T.jsx)(N.b,{to:"/",className:"btn btn-primary",children:"Home"})]})})})};var B=function(){return Object(T.jsx)("div",{className:"app",children:Object(T.jsx)(N.a,{children:Object(T.jsxs)(w.c,{children:[Object(T.jsx)(w.a,{exact:!0,path:"/",component:L}),Object(T.jsx)(w.a,{exact:!0,path:"/search",component:H}),Object(T.jsx)(w.a,{exact:!0,path:"*",component:E})]})})})},S={booklist:[],query:[],isbusy:!0,currentlyReading:[],wantToRead:[],read:[],isbusy2:!1};var _=t(22),A=t(32),C=Object(_.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"BOOK_LIST":return Object(o.a)(Object(o.a)({},e),{},{booklist:n.payload});case"SEARCH_BOOK":return Object(o.a)(Object(o.a)({},e),{},{query:n.query});case"GET_ALL_BOOKS":return Object(o.a)({},e);case"IS_BUSY":return Object(o.a)(Object(o.a)({},e),{},{isbusy:n.isbusy});case"IS_BUSY2":return Object(o.a)(Object(o.a)({},e),{},{isbusy2:n.isbusy2});case"CURRENTLY_READING":return Object(o.a)(Object(o.a)({},e),{},{currentlyReading:n.currentlyReading});case"WANT_TO_READ":return Object(o.a)(Object(o.a)({},e),{},{wantToRead:n.wantToRead});case"READ":return Object(o.a)(Object(o.a)({},e),{},{read:n.read});default:return e}}),Object(A.composeWithDevTools)());a.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(j.a,{store:C,children:Object(T.jsx)(B,{})})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.6bdd0b00.chunk.js.map